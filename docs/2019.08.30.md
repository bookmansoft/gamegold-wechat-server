# 真实游戏集成纪实

## 选型

选取H5类型的《鸡小德》，作为第一款和Vallnet集成的游戏

## 初期诉求

1. 用户在进入游戏前，就可以在钱包内查看游戏详情、商城道具列表等信息

鸡小德需要提供包括游戏详情、商城道具列表、道具详情在内的REST接口

2. 用户可以在鸡小德内下单购买道具，然后回到钱包内支付。鸡小德有能力接收并处理订单支付通知

为此，鸡小德需要和特约节点交互的能力，进行上链道具的打造/分发、订单广播功能

3. 钱包和鸡小德的交叉认证

钱包用户可以携带认证信息，直接登录游戏，但该认证信息不能携带敏感信息，如钱包登录令牌等
出于安全性考虑，鸡小德用户无法凭借游戏内认证直接登录钱包，只能携带必要信息(如GameId/InnerId)跳转钱包，再由钱包独立完成认证流程

4. 确权

用户进入游戏后，可以在背包中列表查看所拥有的、由鸡小德签发的上链道具，并可以在游戏内正常使用
如果要对这些道具进行熔铸、转让、拍卖处理，必须跳转回钱包操作
用户在钱包内对上述道具进行的各项处理，将在游戏内同步体现(最终一致性)，换个角度看，主网是消息发布者，游戏是消息订阅者
