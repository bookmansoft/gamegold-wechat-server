(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[90],{"24WP":function(e,t,a){"use strict";var r=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Mwp2");var n=r(a("VXEj"));a("IzEo");var p=r(a("bx4M")),s=r(a("pVnL"));a("+L6B");var o=r(a("2/Rp"));a("jCWc");var d=r(a("kPKH")),u=r(a("lwsE")),i=r(a("W8MJ")),c=r(a("a1gu")),f=r(a("Nsbk")),m=r(a("7W2i"));a("2qtc");var g=r(a("kLXV"));a("OaEy");var h=r(a("2fM7"));a("y8nQ");var y,E,_,v,k=r(a("Vl3Y")),b=l(a("q1tI")),w=a("MuoO"),P=a("LLXN"),x=r(a("zHco")),C=r(a("+kNj")),L=r(a("3a4m")),D=k.default.Item,M=C.default.Description,S=h.default.Option,T=g.default.confirm,F=(y=(0,w.connect)(function(e){var t=e.gameprops;return{gameprops:t}}),E=k.default.create(),y(_=E((v=function(e){function t(){var e,a;(0,u.default)(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return a=(0,c.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(l))),a.state={cid:"",pid:"",cp_url:"",cp_text:"",propsSearchList:[],statePropsDetail:{},cpPropsDetail:{}},a.handleSubmit=function(e){var t=a.props,r=t.dispatch,l=t.form;e.preventDefault(),l.validateFieldsAndScroll(function(e,t){if("undefined"!=typeof t.belongGame&&"undefined"!=typeof t.belongProps){var l=a.state.cpPropsDetail;if(null!=l&&"undefined"!=typeof l&&0!=l.length){var n=parseInt(l.props_rank);if(1==n||2==n||3==n||4==n||5==n){var p={};p.props_id=l.id,p.props_name=l.props_name,p.props_type=l.props_type,p.cid=a.state.cid,p.props_desc=l.props_desc,p.icon_url=l.icon,p.icon_preview=l.more_icon,p.status=l.props_status||1,p.props_price=l.props_price,p.props_rank=l.props_rank,p.propsAt=l.props_createtime,r({type:"gameprops/createproplocal",payload:p}).then(function(e){0==e.code?T({title:"\u521b\u5efa\u6210\u529f",content:"\u9053\u5177\u521b\u5efa\u6210\u529f\uff0c\u60a8\u53ef\u4ee5\u524d\u5f80\u9053\u5177\u5217\u8868\u67e5\u770b\uff01",okText:"\u8fd4\u56de\u5217\u8868",okType:"primary",cancelText:"\u67e5\u770b\u8be6\u60c5",cancelType:"primary",onOk:function(){L.default.push("/gameprops/list")},onCancel:function(){L.default.push("/gameprops/detail/".concat(e.data.id))}}):g.default.error({title:"\u9519\u8bef",content:e.msg||"\u9053\u5177\u521b\u5efa\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"})})}else g.default.error({title:"\u9519\u8bef",content:"\u9053\u5177\u542b\u91d1\u91cf\u6570\u503c\u9519\u8bef\uff01"})}else g.default.error({title:"\u9519\u8bef",content:"\u8bf7\u9009\u62e9\u6e38\u620f\u4ee5\u53ca\u9053\u5177\uff01"})}else g.default.error({title:"\u9519\u8bef",content:"\u8bf7\u9009\u62e9\u6e38\u620f\u4ee5\u53ca\u9053\u5177\uff01"})})},a.handleGameChange=function(e){var t=a.props.dispatch;if("undefined"!=typeof e&&""!=e){var r=e.split("|"),l=r[0]||"",n=r[1]||"",p=r[2]||"";""==n&&g.default.error({title:"\u9519\u8bef",content:"\u6e38\u620f\u5382\u5546\u5730\u5740\u9519\u8bef\uff01\u65e0\u6cd5\u83b7\u53d6\u9053\u5177"}),a.setState({cid:l,cp_url:n,cp_text:p}),t({type:"gameprops/getPropsByGame",payload:{cp_url:n}})}},a.onPropsChange=function(e){a.setState({pid:e})},a.previewProp=function(){var e=a.props.dispatch,t=a.state.cp_url,r=a.state.pid;""!=r&&e({type:"gameprops/cpPropsDetail",payload:{cp_url:t,pid:r}}).then(function(e){""!=e&&a.setState({cpPropsDetail:e})})},a}return(0,m.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"gameprops/getAllGameList"})}},{key:"getRankNote",value:function(e){var t="";switch(parseInt(e)){case 1:t="5%(\u767d)";break;case 2:t="10%(\u7eff)";break;case 3:t="20%(\u84dd)";break;case 4:t="50%(\u7d2b)";break;case 5:t="80%(\u6a59)";break;default:t="";break}return t}},{key:"render",value:function(){var e=this.props,t=e.gameprops,a=t.gameList,r=t.gamePropsList,l=e.submitting,u=this.state.cpPropsDetail,i=this.props.form,c=i.getFieldDecorator,f=(i.getFieldValue,{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}}),m={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return b.default.createElement(x.default,{title:"\u521b\u5efa\u65b0\u9053\u5177",content:"\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u521b\u5efa\u5168\u65b0\u7684\u9053\u5177\u54c1\u7c7b"},b.default.createElement(k.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},b.default.createElement(p.default,{title:"\u9053\u5177\u4fe1\u606f",bordered:!1,headStyle:{fontWeight:600}},b.default.createElement(D,(0,s.default)({},f,{label:"\u4ece\u6e38\u620f\u4e2d\u9009\u62e9\u9053\u5177"}),b.default.createElement(d.default,{span:8},b.default.createElement(D,null,c("belongGame",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6e38\u620f"}]})(b.default.createElement(h.default,{setFieldsValue:0,onChange:this.handleGameChange},a.map(function(e){return b.default.createElement(S,{key:e.cp_id+"|"+e.cp_url+"|"+e.cp_text},e.cp_text)}))))),b.default.createElement(d.default,{span:8,style:{marginLeft:32}},b.default.createElement(D,null,c("belongProps",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u88c5\u5907"}]})(b.default.createElement(h.default,{setFieldsValue:0,onChange:this.onPropsChange},r.map(function(e){return b.default.createElement(S,{key:e.id},e.props_name)}))))),b.default.createElement(d.default,{span:4,style:{marginLeft:32}},b.default.createElement(D,{style:{marginLeft:32}},b.default.createElement(o.default,{type:"primary",onClick:this.previewProp}," ",b.default.createElement(P.FormattedMessage,{id:"form.preview"})))))),b.default.createElement(p.default,{bordered:!1,headStyle:{fontWeight:600},title:"\u9053\u5177\u4fe1\u606f\u9884\u89c8"},b.default.createElement(C.default,{size:"large",style:{marginBottom:32}},b.default.createElement(M,{term:"\u9053\u5177ID"},u.id||""),b.default.createElement(M,{term:"\u9053\u5177\u540d\u79f0"},u.props_name||""),b.default.createElement(M,{term:"\u9053\u5177\u5c5e\u6027"},u.props_type||""),b.default.createElement(M,{term:"\u6240\u5c5e\u6e38\u620f"},this.state.cp_text||""),b.default.createElement(M,{term:"\u6dfb\u52a0\u65f6\u95f4"},u.props_createtime||""),b.default.createElement(M,{term:"\u9500\u552e\u72b6\u6001"},u.props_status||""),b.default.createElement(M,{term:"\u5546\u57ce\u6807\u4ef7"},u.props_price||""),b.default.createElement(M,{term:"\u542b\u91d1\u7b49\u7ea7"},this.getRankNote(u.props_rank))),b.default.createElement(C.default,{size:"large"},b.default.createElement(M,{term:"\u9053\u5177\u63cf\u8ff0"},u.props_desc||"")),b.default.createElement(C.default,{size:"large",style:{borderTop:"1px solid #ddd",marginTop:32}},b.default.createElement(M,{term:"\u9053\u5177\u56fe\u6807 ",span:"24",style:{marginTop:32}},b.default.createElement("img",{width:120,src:u.icon||""})),b.default.createElement(M,{term:"\u9053\u5177\u8bf4\u660e\u56fe"},b.default.createElement(n.default,{grid:{gutter:24,lg:3,md:2,sm:1,xs:1},dataSource:u.more_icon||"",renderItem:function(e){return b.default.createElement(n.default.Item,null,b.default.createElement("img",{width:120,src:e}))}})))),b.default.createElement(p.default,null,b.default.createElement(D,(0,s.default)({},m,{style:{marginTop:32}}),b.default.createElement(o.default,{type:"primary",htmlType:"submit",loading:l},b.default.createElement(P.FormattedMessage,{id:"form.submit"})),b.default.createElement(o.default,{style:{marginLeft:8}},b.default.createElement(P.FormattedMessage,{id:"form.cancel"}))))))}}]),t}(b.PureComponent),_=v))||_)||_),I=F;t.default=I}}]);