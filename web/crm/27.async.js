(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{cWlD:function(e,t,a){"use strict";var r=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=r(a("2/Rp"));a("jCWc");var d=r(a("kPKH"));a("IzEo");var o=r(a("bx4M")),u=r(a("jehZ")),s=r(a("2Taf")),c=r(a("vZ4D")),p=r(a("l4Ni")),i=r(a("ujKo")),f=r(a("MhPg"));a("OaEy");var m=r(a("2fM7"));a("2qtc");var g=r(a("kLXV"));a("y8nQ");var h,E,y,b,v=r(a("Vl3Y")),k=l(a("q1tI")),S=a("MuoO"),P=a("LLXN"),_=r(a("zHco")),N=r(a("3a4m")),O=r(a("+kNj")),w=v.default.Item,C=g.default.confirm,D=m.default.Option,x=O.default.Description,A=(h=(0,S.connect)(function(e){var t=e.gameprops,a=e.loading;return{gameprops:t,loading:a.models.gameprops}}),E=v.default.create(),h(y=E((b=function(e){function t(){var e,a;(0,s.default)(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return a=(0,p.default)(this,(e=(0,i.default)(t)).call.apply(e,[this].concat(l))),a.state={visible:!1,currentAddr:[],confirmed:0,currentGame:{},currentPropDetail:{},totalPrice:0},a.handleSubmit=function(e){var t=a.props,r=t.dispatch,l=t.form;e.preventDefault(),l.validateFieldsAndScroll(function(e,t){var l=a.state.currentAddr;if(t.belongProps)if(0!=l.length){var n=JSON.parse(t.belongProps);n.cid=a.state.currentGame.cp_id,r({type:"gameprops/sendlistremote",payload:{prop:n,addr:l}}).then(function(e){e&&0==e.code?C({title:"\u8d60\u9001\u6210\u529f",content:"\u9053\u5177\u8d60\u9001\u6210\u529f\uff01",okText:"\u8fd4\u56de\u9053\u5177\u5217\u8868",okType:"primary",onOk:function(){N.default.push("/usermgr/userlist")}}):g.default.error({title:"\u9519\u8bef",content:e?e.msg:"\u8d60\u9001\u5931\u8d25\u8bf7\u91cd\u8bd5\uff01"})}).catch(function(e){g.default.error({title:"\u9519\u8bef",content:e.message})})}else g.default.error({title:"\u9519\u8bef",content:"\u8bf7\u9009\u62e9\u7528\u6237\uff01"});else g.default.error({title:"\u9519\u8bef",content:"\u9053\u5177\u9009\u62e9\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"})})},a.handleGameChange=function(e){e=JSON.parse(e),a.setState({currentGame:e});var t=a.props,r=t.form,l=t.dispatch;r.setFieldsValue({belongProps:""}),e&&l({type:"gameprops/getPropsByGame",payload:{cp_url:e.cp_url}})},a.onPropsChange=function(e){a.setState({currentPropDetail:JSON.parse(e),totalPrice:0})},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch,a=this.props.match.params.addr||"";""!=a&&(a=JSON.parse(a),this.setState({currentAddr:a})),t({type:"gameprops/getAllGameList",payload:{}}),t({type:"gameprops/getBalanceAll",payload:{}}).then(function(t){0===t.code&&e.setState({confirmed:JSON.stringify(t.data.confirmed)})})}},{key:"getRankNote",value:function(e){var t="";switch(parseInt(e)){case 1:t="5%(\u767d)";break;case 2:t="10%(\u7eff)";break;case 3:t="20%(\u84dd)";break;case 4:t="50%(\u7d2b)";break;case 5:t="80%(\u6a59)";break;default:t="";break}return t}},{key:"render",value:function(){var e=this.props,t=e.submitting,a=e.gameprops,r=a.gameList,l=a.gamePropsList,s=e.form.getFieldDecorator,c=this.state,p=c.currentAddr,i=c.currentPropDetail,f=c.totalPrice,g=c.confirmed,h={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},E={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return k.default.createElement(_.default,{title:"\u9053\u5177\u8d60\u9001"},k.default.createElement(v.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},k.default.createElement(o.default,{title:"\u8d60\u9001\u4eba\u6570: ".concat(p.length),bordered:!1,headStyle:{fontWeight:600}},p.map(function(e){return k.default.createElement(w,(0,u.default)({},h,{key:e}),e)})),k.default.createElement(o.default,{title:"\u9009\u62e9\u6e38\u620f\u9053\u5177",bordered:!1,headStyle:{fontWeight:600}},k.default.createElement(d.default,{span:5},k.default.createElement("span",null,"\u9009\u53d6\u6e38\u620f"),k.default.createElement(w,null,s("belongGame",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6e38\u620f"}]})(k.default.createElement(m.default,{onChange:this.handleGameChange},r.map(function(e){return k.default.createElement(D,{key:e.cp_id,value:JSON.stringify(e)},e.cp_text)}))))),k.default.createElement(d.default,{span:1}),k.default.createElement(d.default,{span:5},k.default.createElement("span",null,"\u9009\u53d6\u9053\u5177"),k.default.createElement(w,null,s("belongProps",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9053\u5177"}]})(k.default.createElement(m.default,{onChange:this.onPropsChange},l.map(function(e){return k.default.createElement(D,{key:e.id,value:JSON.stringify(e)},e.props_name)})))))),k.default.createElement(o.default,{bordered:!1,headStyle:{fontWeight:600},title:"\u9053\u5177\u4fe1\u606f\u9884\u89c8"},k.default.createElement(O.default,{size:"large",style:{marginBottom:32}},k.default.createElement(x,{term:"\u9053\u5177ID"},i.id||""),k.default.createElement(x,{term:"\u9053\u5177\u540d\u79f0"},i.props_name||""),k.default.createElement(x,{term:"\u9053\u5177\u5c5e\u6027"},i.props_type||""),k.default.createElement(x,{term:"\u6240\u5c5e\u6e38\u620f"},this.state.cp_text||""),k.default.createElement(x,{term:"\u6dfb\u52a0\u65f6\u95f4"},i.props_createtime||""),k.default.createElement(x,{term:"\u9500\u552e\u72b6\u6001"},i.props_status||""),k.default.createElement(x,{term:"\u5546\u57ce\u6807\u4ef7"},i.props_price||""),k.default.createElement(x,{term:"\u542b\u91d1\u7b49\u7ea7"},this.getRankNote(i.props_rank))),k.default.createElement(O.default,{size:"large"},k.default.createElement(x,{term:"\u9053\u5177\u63cf\u8ff0"},i.props_desc||""),k.default.createElement(x,{span:24,style:{marginTop:32}},k.default.createElement("img",{width:120,src:i.icon||""})))),k.default.createElement(o.default,{title:"\u7ed3\u7b97",bordered:!1,headStyle:{fontWeight:600}},k.default.createElement(w,(0,u.default)({},h,{label:"\u5355 \u4ef7"}),parseFloat(i.props_price/1e5).toFixed(3),"\u5343\u514b/\u4ef6"),k.default.createElement(w,(0,u.default)({},h,{label:"\u542b \u91d1 \u91cf"}),this.getRankNote(i.props_rank)),k.default.createElement(w,(0,u.default)({},h,{label:"\u8d39 \u7528"}),f,"\u5343\u514b"),k.default.createElement(w,(0,u.default)({},h,{label:"\u5907 \u7528 \u91d1"}),parseFloat(g/1e5).toFixed(3),"\u5343\u514b")),k.default.createElement(o.default,{bordered:!1,headStyle:{fontWeight:600}},k.default.createElement(w,(0,u.default)({},E,{style:{marginTop:32}}),k.default.createElement(n.default,{type:"primary",htmlType:"submit",loading:t},"\u786e\u5b9a\u8d60\u9001"),k.default.createElement(n.default,{style:{marginLeft:8}},k.default.createElement(P.FormattedMessage,{id:"form.cancel"}))))))}}]),t}(k.PureComponent),y=b))||y)||y),J=A;t.default=J}}]);